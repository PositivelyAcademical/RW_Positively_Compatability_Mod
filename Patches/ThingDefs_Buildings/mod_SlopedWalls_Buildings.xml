<?xml version="1.0" encoding="UTF-8"?>
<Patch>

<!--  ==============================================================================================================  -->
<!--  What this xml patch does:                                                                                       -->
<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  @Slope                                                                              -->
<!--    + Defs ADD ThingDef @Name  Slope                                                                              -->
<!--                        @ParentName  BuildingBase                                                                 -->
<!--                        thingClass  Building                                                                      -->
<!--                        category  Building                                                                        -->
<!--                        graphicData linkFlags li  Wall                                                            -->
<!--                                              li  Rock                                                            -->
<!--                                    damageData cornerTL  Damage/Corner                                            -->
<!--                                               cornerTR  Damage/Corner                                            -->
<!--                                               cornerBL  Damage/Corner                                            -->
<!--                                               cornerBR  Damage/Corner                                            -->
<!--                                               edgeTop  Damage/Edge                                               -->
<!--                                               edgeBot  Damage/Edge                                               -->
<!--                                               edgeLeft  Damage/Edge                                              -->
<!--                                               edgeRight  Damage/Edge                                             -->
<!--                        statBases MeditationFocusStrength  0.22                                                   -->
<!--                        leaveResourcesWhenKilled  false                                                           -->
<!--                        blockWind  false                                                                          -->
<!--                        castEdgeShadows  true                                                                     -->
<!--                        fillPercent  1                                                                            -->
<!--                        coversFloor  true                                                                         -->
<!--                        placingDraggableDimensions  1                                                             -->
<!--                        tickerType  Never                                                                         -->
<!--                        rotatable  false                                                                          -->
<!--                        selectable true                                                                           -->
<!--                        neverMultiSelect  true                                                                    -->
<!--                        useStuffTerrainAffordance  true                                                           -->
<!--                        holdsRoof  false                                                                          -->
<!--                        designationCategory  Structure                                                            -->
<!--                        staticSunShadowHeight  0.6                                                                -->
<!--                        blockLight  true                                                                          -->
<!--                        canOverlapZones  false                                                                    -->
<!--                        fertility  0                                                                              -->
<!--                        building isInert  true                                                                    -->
<!--                                 isPlaceOverableWall  true                                                        -->
<!--                                 ai_chillDestination  false                                                       -->
<!--                                 relatedBuildCommands li  Door                                                    -->
<!--                                                      li  Autodoor                                                -->
<!--                        comps li @Class  CompProperties_MeditationFocus                                           -->
<!--                                 statDef  MeditationFocusStrength                                                 -->
<!--                                 focusTypes li  Minimal                                                           -->
<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Birm                                                                                -->
<!--    + SlopedWall REPLACE ./                                                                                       -->
<!--        WITH ThingDef @Name  SlopedWall                                                                           -->
<!--                      @ParentName  BuildingBase                                                                   -->
<!--                      defName  SlopedWall                                                                         -->
<!--                      label  birm                                                                                 -->
<!--                      description  A climbable sloped wall. Blocks line of sight but not movement. The flat       -->
<!--                                     leveled top is easy to stand on.                                             -->
<!--                                                                                                                  -->
<!--                      thingClass  Building                                                                        -->
<!--                      category  Building                                                                          -->
<!--                      graphicData texPath  Buildings/Linked/SlopedWallFlat                                        -->
<!--                                  graphicClass  Graphic_Appearances                                               -->
<!--                                  linkType  CornerFiller                                                          -->
<!--                                  linkFlags li  Wall                                                              -->
<!--                                            li  Rock                                                              -->
<!--                                  damageData cornerTL  Damage/Corner                                              -->
<!--                                             cornerTR  Damage/Corner                                              -->
<!--                                             cornerBL  Damage/Corner                                              -->
<!--                                             cornerBR  Damage/Corner                                              -->
<!--                                             edgeTop  Damage/Edge                                                 -->
<!--                                             edgeBot  Damage/Edge                                                 -->
<!--                                             edgeLeft  Damage/Edge                                                -->
<!--                                             edgeRight  Damage/Edge                                               -->
<!--                      uiIconPath  UI/SlopedWall_north                                                             -->
<!--                      statBases MaxHitPoints  250                                                                 -->
<!--                                WorkToBuild  110                                                                  -->
<!--                                Flammability  0.2                                                                 -->
<!--                                MeditationFocusStrength  0.22                                                     -->
<!--                      costStuffCount  5                                                                           -->
<!--                      leaveResourcesWhenKilled  false                                                             -->
<!--                      altitudeLayer  Building                                                                     -->
<!--                      passability  Standable                                                                      -->
<!--                      pathCost  20                                                                                -->
<!--                      blockWind  false                                                                            -->
<!--                      castEdgeShadows  true                                                                       -->
<!--                      fillPercent  1                                                                              -->
<!--                      coversFloor  true                                                                           -->
<!--                      placingDraggableDimensions  1                                                               -->
<!--                      tickerType  Never                                                                           -->
<!--                      rotatable  false                                                                            -->
<!--                      selectable true                                                                             -->
<!--                      neverMultiSelect  true                                                                      -->
<!--                      useStuffTerrainAffordance  true                                                             -->
<!--                      terrainAffordanceNeeded  Heavy                                                              -->
<!--                      holdsRoof  false                                                                            -->
<!--                      designationCategory  Structure                                                              -->
<!--                      staticSunShadowHeight  0.6                                                                  -->
<!--                      blockLight  true                                                                            -->
<!--                      canOverlapZones  false                                                                      -->
<!--                      fertility  0                                                                                -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                                      li  Woody                                                                   -->
<!--                                      li  Stony                                                                   -->
<!--                      building isInert  true                                                                      -->
<!--                               isPlaceOverableWall  true                                                          -->
<!--                               ai_chillDestination  false                                                         -->
<!--                               blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                               relatedBuildCommands li  Door                                                      -->
<!--                                                    li  Autodoor                                                  -->
<!--                      comps li @Class  CompProperties_MeditationFocus                                             -->
<!--                               statDef  MeditationFocusStrength                                                   -->
<!--                               focusTypes li  Minimal                                                             -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  1.25                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  1.25                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Ridge                                                                               -->
<!--    + SlopedRidge REPLACE  ./                                                                                     -->
<!--        WITH ThingDef @ParentName  SlopedWall                                                                     -->
<!--                      defName  SlopedRidge                                                                        -->
<!--                      label  ridge                                                                                -->
<!--                      description  A climbable sloped barrier. Blocks line of sight but not movement, only        -->
<!--                                     impedes it. The narrow tops require some balance to walk across.             -->
<!--                      graphicData texPath  Buildings/Linked/SlopedWall                                            -->
<!--                                  graphicClass  Graphic_Appearances                                               -->
<!--                                  linkType  Basic                                                                 -->
<!--                      uiIconPath  UI/SlopedWall_east                                                              -->
<!--                      passability  PassThroughOnly                                                                -->
<!--                      pathCost  60                                                                                -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaSomethingExpanded  -  Birm                                                                       -->
<!--    + SlopedWall researchPrerequisites ADD li  TrenchWarfare                                                      -->
<!--  ==============================================================================================================  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--                                                                                                                  -->
<!--  ==============================================================================================================  -->

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>SlopedWalls (Continued)</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>

<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Birm                                                                                -->
<!--  ==============================================================================================================  -->
<!--    + SlopedWall REPLACE ./                                                                                       -->
<!--        WITH ThingDef @Name  SlopedWall                                                                           -->
<!--                      @ParentName  BuildingBase                                                                   -->
<!--                      defName  SlopedWall                                                                         -->
<!--                      label  birm                                                                                 -->
<!--                      description  A climbable sloped wall. Blocks line of sight but not movement. The flat       -->
<!--                                     leveled top is easy to stand on.                                             -->
<!--                                                                                                                  -->
<!--                      thingClass  Building                                                                        -->
<!--                      category  Building                                                                          -->
<!--                      graphicData texPath  Buildings/Linked/SlopedWallFlat                                        -->
<!--                                  graphicClass  Graphic_Appearances                                               -->
<!--                                  linkType  CornerFiller                                                          -->
<!--                                  linkFlags li  Wall                                                              -->
<!--                                            li  Rock                                                              -->
<!--                                  damageData cornerTL  Damage/Corner                                              -->
<!--                                             cornerTR  Damage/Corner                                              -->
<!--                                             cornerBL  Damage/Corner                                              -->
<!--                                             cornerBR  Damage/Corner                                              -->
<!--                                             edgeTop  Damage/Edge                                                 -->
<!--                                             edgeBot  Damage/Edge                                                 -->
<!--                                             edgeLeft  Damage/Edge                                                -->
<!--                                             edgeRight  Damage/Edge                                               -->
<!--                      uiIconPath  UI/SlopedWall_north                                                             -->
<!--                      statBases MaxHitPoints  250                                                                 -->
<!--                                WorkToBuild  110                                                                  -->
<!--                                Flammability  0.2                                                                 -->
<!--                                MeditationFocusStrength  0.22                                                     -->
<!--                      costStuffCount  5                                                                           -->
<!--                      leaveResourcesWhenKilled  false                                                             -->
<!--                      altitudeLayer  Building                                                                     -->
<!--                      passability  Standable                                                                      -->
<!--                      pathCost  20                                                                                -->
<!--                      blockWind  false                                                                            -->
<!--                      castEdgeShadows  true                                                                       -->
<!--                      fillPercent  1                                                                              -->
<!--                      coversFloor  true                                                                           -->
<!--                      placingDraggableDimensions  1                                                               -->
<!--                      tickerType  Never                                                                           -->
<!--                      rotatable  false                                                                            -->
<!--                      selectable true                                                                             -->
<!--                      neverMultiSelect  true                                                                      -->
<!--                      useStuffTerrainAffordance  true                                                             -->
<!--                      terrainAffordanceNeeded  Heavy                                                              -->
<!--                      holdsRoof  false                                                                            -->
<!--                      designationCategory  Structure                                                              -->
<!--                      staticSunShadowHeight  0.6                                                                  -->
<!--                      blockLight  true                                                                            -->
<!--                      canOverlapZones  false                                                                      -->
<!--                      fertility  0                                                                                -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                                      li  Woody                                                                   -->
<!--                                      li  Stony                                                                   -->
<!--                      building isInert  true                                                                      -->
<!--                               isPlaceOverableWall  true                                                          -->
<!--                               ai_chillDestination  false                                                         -->
<!--                               blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                               relatedBuildCommands li  Door                                                      -->
<!--                                                    li  Autodoor                                                  -->
<!--                      comps li @Class  CompProperties_MeditationFocus                                             -->
<!--                               statDef  MeditationFocusStrength                                                   -->
<!--                               focusTypes li  Minimal                                                             -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  1.25                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  1.25                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
                <li Class="PatchOperationReplace">
                    <xpath>/Defs/ThingDef[defName="SlopedWall"]</xpath>
                    <value>
                        <ThingDef Name="SlopedWall" ParentName="BuildingBase">
                            <defName>SlopedWall</defName>
                            <label>birm</label>
                            <description>A climbable sloped wall. Blocks line of sight but not movement. The flat leveled top is easy to stand on.</description>
                            <thingClass>Building</thingClass>
                            <category>Building</category>
                            <graphicData>
                                <texPath>Buildings/Linked/SlopedWallFlat</texPath>
                                <graphicClass>Graphic_Appearances</graphicClass>
                                <linkType>CornerFiller</linkType>
                                <linkFlags>
                                    <li>Wall</li>
                                    <li>Rock</li>
                                </linkFlags>
                                <damageData>
                                    <cornerTL>Damage/Corner</cornerTL>
                                    <cornerTR>Damage/Corner</cornerTR>
                                    <cornerBL>Damage/Corner</cornerBL>
                                    <cornerBR>Damage/Corner</cornerBR>
                                    <edgeTop>Damage/Edge</edgeTop>
                                    <edgeBot>Damage/Edge</edgeBot>
                                    <edgeLeft>Damage/Edge</edgeLeft>
                                    <edgeRight>Damage/Edge</edgeRight>
                                </damageData>
                            </graphicData>
                            <uiIconPath>UI/SlopedWall_north</uiIconPath>
                            <statBases>
                                <MaxHitPoints>250</MaxHitPoints>
                                <WorkToBuild>110</WorkToBuild>
                                <Flammability>0.2</Flammability>
                                <MeditationFocusStrength>0.22</MeditationFocusStrength>
                            </statBases>
                            <costStuffCount>5</costStuffCount>
                            <leaveResourcesWhenKilled>false</leaveResourcesWhenKilled>
                            <altitudeLayer>Building</altitudeLayer>
                            <passability>Standable</passability>
                            <pathCost>20</pathCost>
                            <blockWind>false</blockWind>
                            <castEdgeShadows>true</castEdgeShadows>
                            <fillPercent>1</fillPercent>
                            <coversFloor>true</coversFloor>
                            <placingDraggableDimensions>1</placingDraggableDimensions>
                            <tickerType>Never</tickerType>
                            <rotatable>false</rotatable>
                            <selectable>true</selectable>
                            <neverMultiSelect>true</neverMultiSelect>
                            <useStuffTerrainAffordance>true</useStuffTerrainAffordance>
                            <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
                            <holdsRoof>false</holdsRoof>
                            <designationCategory>Structure</designationCategory>
                            <staticSunShadowHeight>0.6</staticSunShadowHeight>
                            <blockLight>true</blockLight>
                            <canOverlapZones>false</canOverlapZones>
                            <fertility>0</fertility>
                            <stuffCategories>
                                <li>Metallic</li>
                                <li>Woody</li>
                                <li>Stony</li>
                            </stuffCategories>
                            <building>
                                <isInert>true</isInert>
                                <isPlaceOverableWall>true</isPlaceOverableWall>
                                <ai_chillDestination>false</ai_chillDestination>
                                <blueprintGraphicData>
                                    <texPath>Things/Building/Linked/Wall_Blueprint_Atlas</texPath>
                                </blueprintGraphicData>
                                <relatedBuildCommands>
                                    <li>Door</li>
                                    <li>Autodoor</li>
                                </relatedBuildCommands>
                            </building>
                            <comps>
                                <li Class="CompProperties_MeditationFocus">
                                    <statDef>MeditationFocusStrength</statDef>
                                    <focusTypes>
                                        <li>Minimal</li>
                                    </focusTypes>
                                </li>
                            </comps>
                            <damageMultipliers>
                                <li>
                                    <damageDef>Bomb</damageDef>
                                    <multiplier>1.25</multiplier>
                                </li>
                                <li>
                                    <damageDef>Thump</damageDef>
                                    <multiplier>1.25</multiplier>
                                </li>
                            </damageMultipliers>
                            <researchPrerequisites />
                        </ThingDef>
                    </value>
                </li>



            </operations>
        </match>
    </Operation>

</Patch>
