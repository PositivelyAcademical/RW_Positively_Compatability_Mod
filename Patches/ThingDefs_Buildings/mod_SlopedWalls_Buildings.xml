<?xml version="1.0" encoding="UTF-8"?>
<Patch>

<!--  ==============================================================================================================  -->
<!--  What this xml patch does:                                                                                       -->
<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Slope                                                                               -->
<!--    + Defs ADD ThingDef @Abstract  true                                                                           -->
<!--                        @Name  POS_Slope                                                                          -->
<!--                        @ParentName  BuildingBase                                                                 -->
<!--                        @Name  Slope                                                                              -->
<!--                        category  Building                                                                        -->
<!--                        graphicData linkFlags li  Wall                                                            -->
<!--                                              li  Rock                                                            -->
<!--                                    damageData cornerTL  Damage/Corner                                            -->
<!--                                               cornerTR  Damage/Corner                                            -->
<!--                                               cornerBL  Damage/Corner                                            -->
<!--                                               cornerBR  Damage/Corner                                            -->
<!--                                               edgeTop  Damage/Edge                                               -->
<!--                                               edgeBot  Damage/Edge                                               -->
<!--                                               edgeLeft  Damage/Edge                                              -->
<!--                                               edgeRight  Damage/Edge                                             -->
<!--                        statBases MeditationFocusStrength  0.22                                                   -->
<!--                        leaveResourcesWhenKilled  false                                                           -->
<!--                        altitudeLayer  Building                                                                   -->
<!--                        blockWind  false                                                                          -->
<!--                        castEdgeShadows  true                                                                     -->
<!--                        fillPercent  1                                                                            -->
<!--                        coversFloor  true                                                                         -->
<!--                        placingDraggableDimensions  1                                                             -->
<!--                        tickerType  Never                                                                         -->
<!--                        rotatable  false                                                                          -->
<!--                        selectable true                                                                           -->
<!--                        neverMultiSelect  true                                                                    -->
<!--                        useStuffTerrainAffordance  true                                                           -->
<!--                        holdsRoof  false                                                                          -->
<!--                        designationCategory  Structure                                                            -->
<!--                        staticSunShadowHeight  0.6                                                                -->
<!--                        blockLight  true                                                                          -->
<!--                        canOverlapZones  false                                                                    -->
<!--                        fertility  0                                                                              -->
<!--                        building isInert  true                                                                    -->
<!--                                 isPlaceOverableWall  true                                                        -->
<!--                                 ai_chillDestination  false                                                       -->
<!--                                 relatedBuildCommands li  Door                                                    -->
<!--                                                      li  Autodoor                                                -->
<!--                        comps li @Class  CompProperties_MeditationFocus                                           -->
<!--                                 statDef  MeditationFocusStrength                                                 -->
<!--                                 focusTypes li  Minimal                                                           -->
<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Birm                                                                                -->
<!--    + SlopedWall REPLACE ./                                                                                       -->
<!--        WITH ThingDef @ParentName  POS_Slope                                                                      -->
<!--                      defName  POS_Birm                                                                           -->
<!--                      label  birm                                                                                 -->
<!--                      description  A climbable sloped wall. Blocks line of sight but not movement. The flat       -->
<!--                                     leveled top is easy to stand on.                                             -->
<!--                                                                                                                  -->
<!--                      graphicData texPath  Buildings/Linked/SlopedWallFlat                                        -->
<!--                                  graphicClass  Graphic_Appearances                                               -->
<!--                                  linkType  CornerFiller                                                          -->
<!--                      uiIconPath  UI/SlopedWall_north                                                             -->
<!--                      statBases MaxHitPoints  250                                                                 -->
<!--                                WorkToBuild  110                                                                  -->
<!--                                Flammability  0.2                                                                 -->
<!--                      costStuffCount  5                                                                           -->
<!--                      passability  Standable                                                                      -->
<!--                      pathCost  20                                                                                -->
<!--                      terrainAffordanceNeeded  Heavy                                                              -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                                      li  Woody                                                                   -->
<!--                                      li  Stony                                                                   -->
<!--                      building blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  1.25                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  1.25                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Ridge                                                                               -->
<!--    + SlopedRidge REPLACE  ./                                                                                     -->
<!--        WITH ThingDef @ParentName  POS_Slope                                                                      -->
<!--                      defName  POS_Ridge                                                                          -->
<!--                      label  ridge                                                                                -->
<!--                      description  A climbable sloped barrier. Blocks line of sight but not movement, only        -->
<!--                                     impedes it. The narrow tops require some balance to walk across.             -->
<!--                                                                                                                  -->
<!--                      graphicData texPath  Buildings/Linked/SlopedWall                                            -->
<!--                                  graphicClass  Graphic_Appearances                                               -->
<!--                                  linkType  Basic                                                                 -->
<!--                      uiIconPath  UI/SlopedWall_east                                                              -->
<!--                      statBases MaxHitPoints  250                                                                 -->
<!--                                WorkToBuild  110                                                                  -->
<!--                                Flammability  0.2                                                                 -->
<!--                      costStuffCount  5                                                                           -->
<!--                      passability  PassThroughOnly                                                                -->
<!--                      pathCost  60                                                                                -->
<!--                      terrainAffordanceNeeded  Heavy                                                              -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                                      li  Woody                                                                   -->
<!--                                      li  Stony                                                                   -->
<!--                      building blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  1.25                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  1.25                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpanedSecurity  (ThingDef)  -  Birm                                                    -->
<!--    + POS_Birm researchPrerequisites ADD li  VFES_TrenchWarfare                                                   -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpanedSecurity  (ThingDef)  -  Ridge                                                   -->
<!--    + POS_Ridge researchPrerequisites ADD li  VFES_TrenchWarfare                                                  -->
<!--  ==============================================================================================================  -->
<!--  + NO_MATCH VanillaFurnitureExpanedSecurity                                                                      -->
<!--    + MATCH VanillaWeaponsExpanded  (ThingDef)  -  Birm                                                           -->
<!--      + POS_Birm researchPrerequisites ADD li  VWE_TrenchWarfare                                                  -->
<!--  ==============================================================================================================  -->
<!--  + NO_MATCH VanillaFurnitureExpanedSecurity                                                                      -->
<!--    + MATCH VanillaWeaponsExpanded  (ThingDef)  -  Ridge                                                          -->
<!--      + POS_Ridge researchPrerequisites ADD li  VWE_TrenchWarfare                                                 -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule  (ThingDef)  -  ReinforcedBirm                                     -->
<!--    + SlopedReinforced_Wall REPLACE ./                                                                            -->
<!--        WITH ThingDef @ParentName  POS_Slope                                                                      -->
<!--                      defName  POS_ReinforcedBirm                                                                 -->
<!--                      label  reinforced birm                                                                      -->
<!--                      description  A climbable reinforced sloped wall, created by layering materials over each    -->
<!--                                     other. Blocks line of sight but not movement. The flat leveled top is easy   -->
<!--                                     to stand on.\n\n                                                             -->
<!--                                   Reinforced walls are neary entirely blast resistant and barely take damage     -->
<!--                                     from breaching methods.                                                      -->
<!--                                                                                                                  -->
<!--                      graphicData texPath  Buildings/Linked/ReinforcedWall/ReinforcedSlopedWall_Atlas             -->
<!--                                  graphicClass  Graphic_Single                                                    -->
<!--                                  linkType  CornerFiller                                                          -->
<!--                      uiIconPath  Buildings/Linked/ReinforcedWall/ReinforcedSlopedWall_UI                         -->
<!--                      statBases MaxHitPoints  1400                                                                -->
<!--                                WorkToBuild  200                                                                  -->
<!--                                Flammability  0                                                                   -->
<!--                      costStuffCount  10                                                                          -->
<!--                      passability  Standable                                                                      -->
<!--                      pathCost  20                                                                                -->
<!--                      terrainAffordanceNeeded  Medium                                                             -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                      building blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  0.05                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  0.05                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule  (ThingDef)  -  ReinforcedRidge                                    -->
<!--    + SlopedReinforced_Ridge REPLACE ./                                                                           -->
<!--        WITH ThingDef @ParentName  POS_Slope                                                                      -->
<!--                      defName  POS_ReinforcedRidge                                                                -->
<!--                      label  reinforced ridge                                                                     -->
<!--                      description  A climbable reinforced sloped barrier, created by layering materials over h    -->
<!--                                     each other. Blocks line of sight but not movement, only impedes it. The      -->
<!--                                     narrow tops require some balance to walk across.\n\n                         -->
<!--                                   Reinforced walls are neary entirely blast resistant and barely take damage     -->
<!--                                     from breaching methods.                                                      -->
<!--                                                                                                                  -->
<!--                      graphicData texPath  Buildings/Linked/ReinforcedWall/ReinforcedSlopedRidge_Atlas            -->
<!--                                  graphicClass  Graphic_Single                                                    -->
<!--                                  linkType  Basic      r                                                          -->
<!--                      uiIconPath  Buildings/Linked/ReinforcedWall/ReinforcedSlopedRidge_UI                        -->
<!--                      statBases MaxHitPoints  1400                                                                -->
<!--                                WorkToBuild  200                                                                  -->
<!--                                Flammability  0                                                                   -->
<!--                      costStuffCount /                                                                            -->
<!--                      costList /                                                                                  -->
<!--                      passability  Standable                                                                      -->
<!--                      pathCost  20                                                                                -->
<!--                      terrainAffordanceNeeded  Medium                                                             -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                      building blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  0.05                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  0.05                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + MATCH VanillaFurnitureExpanedSecurity  (ThingDef)  -  ReinforcedBirm                                        -->
<!--      + POS_ReinforcedBirm researchPrerequisites ADD li  VFES_TrenchWarfare                                       -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + MATCH VanillaFurnitureExpanedSecurity  (ThingDef)  -  ReinforcedRidge                                       -->
<!--      + POS_ReinforcedRidge researchPrerequisites ADD li  VFES_TrenchWarfare                                      -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + NO_MATCH VanillaFurnitureExpanedSecurity                                                                    -->
<!--      + MATCH VanillaWeaponsExpanded  (ThingDef)  -  ReinforcedBirm                                               -->
<!--        + POS_ReinforcedBirm researchPrerequisites ADD li  VWE_TrenchWarfare                                      -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + NO_MATCH VanillaFurnitureExpanedSecurity                                                                    -->
<!--      + MATCH VanillaWeaponsExpanded  (ThingDef)  -  ReinforcedRidge                                              -->
<!--        + POS_ReinforcedRidge researchPrerequisites ADD li  VWE_TrenchWarfare                                     -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedBirm                                                -->
<!--      + POS_ReinforcedBirm REPLACE costStuffCount                                                                 -->
<!--                              WITH costStuffCount  5                                                              -->
<!--      + POS_ReinforcedBirm costList ADD POS_BlocksPlascrete  10                                                   -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedRidge                                               -->
<!--      + POS_ReinforcedRidge REPLACE costStuffCount                                                                -->
<!--                               WITH costStuffCount  5                                                             -->
<!--      + POS_ReinforcedRidge costList ADD POS_BlocksPlascrete  10                                                  -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + NO_MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedBirm                                             -->
<!--      + POS_ReinforcedBirm REPLACE costStuffCount                                                                 -->
<!--                              WITH costStuffCount  15                                                             -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + NO_MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedRidge                                            -->
<!--      + POS_ReinforcedRidge REPLACE costStuffCount                                                                -->
<!--                               WITH costStuffCount  15                                                            -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + MATCH DoorsExpanded  (ThingDef)  -  ReinforcedBirm                                                          -->
<!--      + POS_ReinforcedBirm researchPrerequisites ADD li  ProjectHeron_BlastDoors                                  -->
<!--                                                     li  Fabrication                                              -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + MATCH DoorsExpanded  (ThingDef)  -  ReinforcedRidge                                                         -->
<!--      + POS_ReinforcedRidge researchPrerequisites ADD li  ProjectHeron_BlastDoors                                 -->
<!--                                                      li  Fabrication                                             -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + NO_MATCH DoorsExpanded  (ThingDef)  -  ReinforcedBirm                                                       -->
<!--      + POS_ReinforcedBirm researchPrerequisites ADD li  SpacerFurniture                                          -->
<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--    + NO_MATCH DoorsExpanded  (ThingDef)  -  ReinforcedRidge                                                      -->
<!--      + POS_ReinforcedRidge researchPrerequisites ADD li  SpacerFurniture                                         -->
<!--  ==============================================================================================================  -->

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>SlopedWalls (Continued)</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>

<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Slope                                                                               -->
<!--  ==============================================================================================================  -->
<!--    + Defs ADD ThingDef @Abstract  true                                                                           -->
<!--                        @Name  POS_Slope                                                                          -->
<!--                        @ParentName  BuildingBase                                                                 -->
<!--                        thingClass  Building                                                                      -->
<!--                        category  Building                                                                        -->
<!--                        graphicData linkFlags li  Wall                                                            -->
<!--                                              li  Rock                                                            -->
<!--                                    damageData cornerTL  Damage/Corner                                            -->
<!--                                               cornerTR  Damage/Corner                                            -->
<!--                                               cornerBL  Damage/Corner                                            -->
<!--                                               cornerBR  Damage/Corner                                            -->
<!--                                               edgeTop  Damage/Edge                                               -->
<!--                                               edgeBot  Damage/Edge                                               -->
<!--                                               edgeLeft  Damage/Edge                                              -->
<!--                                               edgeRight  Damage/Edge                                             -->
<!--                        statBases MeditationFocusStrength  0.22                                                   -->
<!--                        leaveResourcesWhenKilled  false                                                           -->
<!--                        altitudeLayer  Building                                                                   -->
<!--                        blockWind  false                                                                          -->
<!--                        castEdgeShadows  true                                                                     -->
<!--                        fillPercent  1                                                                            -->
<!--                        coversFloor  true                                                                         -->
<!--                        placingDraggableDimensions  1                                                             -->
<!--                        tickerType  Never                                                                         -->
<!--                        rotatable  false                                                                          -->
<!--                        selectable true                                                                           -->
<!--                        neverMultiSelect  true                                                                    -->
<!--                        useStuffTerrainAffordance  true                                                           -->
<!--                        holdsRoof  false                                                                          -->
<!--                        designationCategory  Structure                                                            -->
<!--                        staticSunShadowHeight  0.6                                                                -->
<!--                        blockLight  true                                                                          -->
<!--                        canOverlapZones  false                                                                    -->
<!--                        fertility  0                                                                              -->
<!--                        building isInert  true                                                                    -->
<!--                                 isPlaceOverableWall  true                                                        -->
<!--                                 ai_chillDestination  false                                                       -->
<!--                                 relatedBuildCommands li  Door                                                    -->
<!--                                                      li  Autodoor                                                -->
<!--                        comps li @Class  CompProperties_MeditationFocus                                           -->
<!--                                 statDef  MeditationFocusStrength                                                 -->
<!--                                 focusTypes li  Minimal                                                           -->
<!--  ==============================================================================================================  -->
                <li Class="PatchOperationAdd">
                    <xpath>/Defs</xpath>
                    <value>
                        <ThingDef Abstract="true" Name="POS_Slope" ParentName="BuildingBase">
                            <thingClass>Building</thingClass>
                            <category>Building</category>
                            <graphicData>
                                <linkFlags>
                                    <li>Wall</li>
                                    <li>Rock</li>
                                </linkFlags>
                                <damageData>
                                    <cornerTL>Damage/Corner</cornerTL>
                                    <cornerTR>Damage/Corner</cornerTR>
                                    <cornerBL>Damage/Corner</cornerBL>
                                    <cornerBR>Damage/Corner</cornerBR>
                                    <edgeTop>Damage/Edge</edgeTop>
                                    <edgeBot>Damage/Edge</edgeBot>
                                    <edgeLeft>Damage/Edge</edgeLeft>
                                    <edgeRight>Damage/Edge</edgeRight>
                                </damageData>
                            </graphicData>
                            <statBases>
                                <MeditationFocusStrength>0.22</MeditationFocusStrength>
                            </statBases>
                            <leaveResourcesWhenKilled>false</leaveResourcesWhenKilled>
                            <altitudeLayer>Building</altitudeLayer>
                            <blockWind>false</blockWind>
                            <castEdgeShadows>true</castEdgeShadows>
                            <fillPercent>1</fillPercent>
                            <coversFloor>true</coversFloor>
                            <placingDraggableDimensions>1</placingDraggableDimensions>
                            <tickerType>Never</tickerType>
                            <rotatable>false</rotatable>
                            <selectable>true</selectable>
                            <neverMultiSelect>true</neverMultiSelect>
                            <useStuffTerrainAffordance>true</useStuffTerrainAffordance>
                            <holdsRoof>false</holdsRoof>
                            <designationCategory>Structure</designationCategory>
                            <staticSunShadowHeight>0.6</staticSunShadowHeight>
                            <blockLight>true</blockLight>
                            <canOverlapZones>false</canOverlapZones>
                            <fertility>0</fertility>
                            <building>
                                <isInert>true</isInert>
                                <isPlaceOverableWall>true</isPlaceOverableWall>
                                <ai_chillDestination>false</ai_chillDestination>
                                <relatedBuildCommands>
                                    <li>Door</li>
                                    <li>Autodoor</li>
                                </relatedBuildCommands>
                            </building>
                            <comps>
                                <li Class="CompProperties_MeditationFocus">
                                    <statDef>MeditationFocusStrength</statDef>
                                    <focusTypes>
                                        <li>Minimal</li>
                                    </focusTypes>
                                </li>
                            </comps>
                        </ThingDef>
                    </value>
                </li>

<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Birm                                                                                -->
<!--  ==============================================================================================================  -->
<!--    + SlopedWall REPLACE ./                                                                                       -->
<!--        WITH ThingDef @ParentName  POS_Slope                                                                      -->
<!--                      defName  POS_Birm                                                                           -->
<!--                      label  birm                                                                                 -->
<!--                      description  A climbable sloped wall. Blocks line of sight but not movement. The flat       -->
<!--                                     leveled top is easy to stand on.                                             -->
<!--                                                                                                                  -->
<!--                      thingClass  Building                                                                        -->
<!--                      category  Building                                                                          -->
<!--                      graphicData texPath  Buildings/Linked/SlopedWallFlat                                        -->
<!--                                  graphicClass  Graphic_Appearances                                               -->
<!--                                  linkType  CornerFiller                                                          -->
<!--                      uiIconPath  UI/SlopedWall_north                                                             -->
<!--                      statBases MaxHitPoints  250                                                                 -->
<!--                                WorkToBuild  110                                                                  -->
<!--                                Flammability  0.2                                                                 -->
<!--                      costStuffCount  5                                                                           -->
<!--                      passability  Standable                                                                      -->
<!--                      pathCost  20                                                                                -->
<!--                      terrainAffordanceNeeded  Heavy                                                              -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                                      li  Woody                                                                   -->
<!--                                      li  Stony                                                                   -->
<!--                      building blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  1.25                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  1.25                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
                <li Class="PatchOperationReplace">
                    <xpath>/Defs/ThingDef[defName="SlopedWall"]</xpath>
                    <value>
                        <ThingDef ParentName="POS_Slope" Name="SlopedWall">
                            <defName>POS_Birm</defName>
                            <label>birm</label>
                            <description>A climbable sloped wall. Blocks line of sight but not movement. The flat leveled top is easy to stand on.</description>
                            <graphicData>
                                <texPath>Buildings/Linked/SlopedWallFlat</texPath>
                                <graphicClass>Graphic_Appearances</graphicClass>
                                <linkType>CornerFiller</linkType>
                            </graphicData>
                            <uiIconPath>UI/SlopedWall_north</uiIconPath>
                            <statBases>
                                <MaxHitPoints>250</MaxHitPoints>
                                <WorkToBuild>110</WorkToBuild>
                                <Flammability>0.2</Flammability>
                            </statBases>
                            <costStuffCount>5</costStuffCount>
                            <passability>Standable</passability>
                            <pathCost>20</pathCost>
                            <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
                            <stuffCategories>
                                <li>Metallic</li>
                                <li>Woody</li>
                                <li>Stony</li>
                            </stuffCategories>
                            <building>
                                <blueprintGraphicData>
                                    <texPath>Things/Building/Linked/Wall_Blueprint_Atlas</texPath>
                                </blueprintGraphicData>
                            </building>
                            <damageMultipliers>
                                <li>
                                    <damageDef>Bomb</damageDef>
                                    <multiplier>1.25</multiplier>
                                </li>
                                <li>
                                    <damageDef>Thump</damageDef>
                                    <multiplier>1.25</multiplier>
                                </li>
                            </damageMultipliers>
                            <researchPrerequisites />
                        </ThingDef>
                    </value>
                </li>

<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  Ridge                                                                               -->
<!--  ==============================================================================================================  -->
<!--    + SlopedRidge REPLACE  ./                                                                                     -->
<!--        WITH ThingDef @ParentName  POS_Slope                                                                      -->
<!--                      defName  POS_Ridge                                                                          -->
<!--                      label  ridge                                                                                -->
<!--                      description  A climbable sloped barrier. Blocks line of sight but not movement, only        -->
<!--                                     impedes it. The narrow tops require some balance to walk across.             -->
<!--                                                                                                                  -->
<!--                      graphicData texPath  Buildings/Linked/SlopedWall                                            -->
<!--                                  graphicClass  Graphic_Appearances                                               -->
<!--                                  linkType  Basic                                                                 -->
<!--                      uiIconPath  UI/SlopedWall_east                                                              -->
<!--                      statBases MaxHitPoints  250                                                                 -->
<!--                                WorkToBuild  110                                                                  -->
<!--                                Flammability  0.2                                                                 -->
<!--                      costStuffCount  5                                                                           -->
<!--                      passability  PassThroughOnly                                                                -->
<!--                      pathCost  60                                                                                -->
<!--                      terrainAffordanceNeeded  Heavy                                                              -->
<!--                      stuffCategories li  Metallic                                                                -->
<!--                                      li  Woody                                                                   -->
<!--                                      li  Stony                                                                   -->
<!--                      building blueprintGraphicData texPath  Things/Building/Linked/Wall_Blueprint_Atlas          -->
<!--                      damageMultipliers li damageDef  Bomb                                                        -->
<!--                                           multiplier  1.25                                                       -->
<!--                                        li damageDef  Thump                                                       -->
<!--                                           multiplier  1.25                                                       -->
<!--                      researchPrerequisites /                                                                     -->
<!--  ==============================================================================================================  -->
                <li Class="PatchOperationReplace">
                    <xpath>/Defs/ThingDef[defName="SlopedRidge"]</xpath>
                    <value>
                        <ThingDef ParentName="POS_Slope">
                            <defName>POS_Ridge</defName>
                            <label>ridge</label>
                            <description>A climbable sloped barrier. Blocks line of sight but not movement, only impedes it. The narrow tops require some balance to walk across.</description>
                            <graphicData>
                                <texPath>Buildings/Linked/SlopedWall</texPath>
                                <graphicClass>Graphic_Appearances</graphicClass>
                                <linkType>Basic</linkType>
                            </graphicData>
                            <uiIconPath>UI/SlopedWall_east</uiIconPath>
                            <statBases>
                                <MaxHitPoints>250</MaxHitPoints>
                                <WorkToBuild>110</WorkToBuild>
                                <Flammability>0.2</Flammability>
                            </statBases>
                            <costStuffCount>5</costStuffCount>
                            <passability>PassThroughOnly</passability>
                            <pathCost>60</pathCost>
                            <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
                            <stuffCategories>
                                <li>Metallic</li>
                                <li>Woody</li>
                                <li>Stony</li>
                            </stuffCategories>
                            <building>
                                <blueprintGraphicData>
                                    <texPath>Things/Building/Linked/Wall_Blueprint_Atlas</texPath>
                                </blueprintGraphicData>
                            </building>
                            <damageMultipliers>
                                <li>
                                    <damageDef>Bomb</damageDef>
                                    <multiplier>1.25</multiplier>
                                </li>
                                <li>
                                    <damageDef>Thump</damageDef>
                                    <multiplier>1.25</multiplier>
                                </li>
                            </damageMultipliers>
                            <researchPrerequisites />
                        </ThingDef>
                    </value>
                </li>

<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpanedSecurity  (ThingDef)  -  Birm                                                    -->
<!--  ==============================================================================================================  -->
<!--    + POS_Birm researchPrerequisites ADD li  VFES_TrenchWarfare                                                   -->
<!--  ==============================================================================================================  -->
                <li Class="PatchOperationFindMod">
                    <mods>
                        <li>Vanilla Furniture Expanded - Security</li>
                    <mods>

                    <match Class="PatchOperationSequence">
                        <operatations>

                            <li Class="PatchOperationAdd">
                                <xpath>/Defs/ThingDef[defName="POS_Birm"]/researchPrerequisites</xpath>
                                <value>
                                    <li>VFES_TrenchWarfare</li>
                                </value>
                            </li>

<!--  ==============================================================================================================  -->
<!--  + MATCH VanillaFurnitureExpanedSecurity  (ThingDef)  -  Ridge                                                   -->
<!--  ==============================================================================================================  -->
<!--    + POS_Ridge researchPrerequisites ADD li  VFES_TrenchWarfare                                                  -->
<!--  ==============================================================================================================  -->
                            <li Class="PatchOperationAdd">
                                <xpath>/Defs/ThingDef[defName="POS_Ridge"]/researchPrerequisites</xpath>
                                <value>
                                    <li>VFES_TrenchWarfare</li>
                                </value>
                            </li>

                        </operatations>
                    </match>

<!--  ==============================================================================================================  -->
<!--  + NO_MATCH VanillaFurnitureExpanedSecurity                                                                      -->
<!--    + MATCH VanillaWeaponsExpanded  (ThingDef)  -  Birm                                                           -->
<!--  ==============================================================================================================  -->
<!--      + POS_Birm researchPrerequisites ADD li  VWE_TrenchWarfare                                                  -->
<!--  ==============================================================================================================  -->
                    <nomatch Class="PatchOperationFindMod">
                        <mods>
                            <li>Vanilla Weapons Expanded</li>
                        </mods>

                        <match Class="PatchOperationSequence">
                            <operatations>

                                <li Class="PatchOperationAdd">
                                    <xpath>/Defs/ThingDef[defName="POS_Birm"]/researchPrerequisites</xpath>
                                    <value>
                                        <li>VWE_TrenchWarfare</li>
                                    </value>
                                </li>

<!--  ==============================================================================================================  -->
<!--  + NO_MATCH VanillaFurnitureExpanedSecurity                                                                      -->
<!--    + MATCH VanillaWeaponsExpanded  (ThingDef)  -  Ridge                                                          -->
<!--  ==============================================================================================================  -->
<!--      + POS_Ridge researchPrerequisites ADD li  VWE_TrenchWarfare                                                 -->
<!--  ==============================================================================================================  -->
                                <li Class="PatchOperationAdd">
                                    <xpath>/Defs/ThingDef[defName="POS_Ridge"]/researchPrerequisites</xpath>
                                    <value>
                                        <li>VWE_TrenchWarfare</li>
                                    </value>
                                </li>

                            </operations>
                        </match>

                    </nomatch>

                </li>


            </operations>
        </match>
    </Operation>

</Patch>
