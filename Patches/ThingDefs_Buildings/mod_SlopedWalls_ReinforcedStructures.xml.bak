<?xml version="1.0" encoding="UTF-8"?>
<Patch>

<!--  ==============================================================================================================  -->
<!--  What this xml patch does:                                                                                       -->
<!--  + MATCH VanillaFurnitureExpandedSpacerModule                                                                    -->
<!--  ==============================================================================================================  -->
<!--    + NO_MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedWall                                                 -->
<!--      + SlopedReinforced_Wall REPLACE researchPrerequisites                                                       -->
<!--                                 WITH researchPrerequisites li  Fabrication                                       -->
<!--                                                            li  Machining                                         -->
<!--  ==============================================================================================================  -->
<!--    + MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedWall                                                    -->
<!--      + SlopedReinforced_Wall REPLACE researchPrerequisites                                                       -->
<!--                                 WITH researchPrerequisites li  ProjectHeron_BlastDoors                           -->
<!--                                                            li  Fabrication                                       -->
<!--  ==============================================================================================================  -->
<!--    + MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedWall                                          -->
<!--      + SlopedReinforced_Wall AFTER statBases                                                                     -->
<!--                             INSERT costList POS_BlocksPlascrete  10                                              -->
<!--      + SlopedReinforced_Wall REPLACE costStuffCount                                                              -->
<!--                                 WITH costStuffCount  5                                                           -->
<!--  ==============================================================================================================  -->
<!--    + NO_MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedWall                                       -->
<!--      + SlopedReinforced_Wall REPLACE costStuffCount                                                              -->
<!--                                 WITH costStuffCount  15                                                          -->
<!--  ==============================================================================================================  -->
<!--    + NO_MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedRidge                                                -->
<!--      + SlopedReinforced_Ridge REPLACE researchPrerequisites                                                      -->
<!--                                  WITH researchPrerequisites li  Fabrication                                      -->
<!--                                                             li  Machining                                        -->
<!--  ==============================================================================================================  -->
<!--    + MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedRidge                                                   -->
<!--      + SlopedReinforced_Ridge REPLACE researchPrerequisites                                                      -->
<!--                                  WITH researchPrerequisites li  ProjectHeron_BlastDoors                          -->
<!--                                                             li  Fabrication                                      -->
<!--  ==============================================================================================================  -->
<!--    + MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedRidge                                         -->
<!--      + SlopedReinforced_Ridge AFTER statBases                                                                    -->
<!--                              INSERT costList POS_BlocksPlascrete  10                                             -->
<!--      + SlopedReinforced_Ridge REPLACE costStuffCount                                                             -->
<!--                                  WITH costStuffCount  5                                                          -->
<!--  ==============================================================================================================  -->
<!--    + NO_MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedRidge                                      -->
<!--      + SlopedReinforced_Ridge REPLACE costStuffCount                                                             -->
<!--                                  WITH costStuffCount  15                                                         -->
<!--  ==============================================================================================================  -->

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>SlopedWalls (Continued)</li>
        </mods>
        <match Class="PatchOperationFindMod">
            <mods>
                <li>Vanilla Furniture Expanded - Spacer Module</li>
            </mods>
            <match Class="PatchOperationSequence">
                <operations>

<!--  ==============================================================================================================  -->
<!--  + ALL_CASES  (ThingDef)  -  ReinforcedSlopedWall                                                                -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Wall REPLACE description                                                                 -->
<!--            WITH description  A climbable reinforced sloped wall, created by layering materials over each other.  -->
<!--                                Blocks line of sight but not movement. The flat leveled top is easy to stand on.  -->
<!--                                Reinforced walls are neary entirely blast resistant and barely take damage from   -->
<!--                                breaching methods.                                                                -->
<!--                                                                                                                  -->
<!--     + SlopedReinforced_Wall statBases REPLACE MaxHitPoints                                                       -->
<!--                                          WITH MaxHitPoints  1400                                                 -->
<!--     + SlopedReinforced_Wall statBases REPLACE Flammability                                                       -->
<!--                                          WITH Flammability  0                                                    -->
<!--     + SlopedReinforced_Wall damageMultipliers li[1] (Bomb) REPLACE multiplier                                    -->
<!--                                                               WITH multiplier  0.05                              -->
<!--     + SlopedReinforced_Wall damageMultipliers li[2] (Thump) REPLACE multiplier                                   -->
<!--                                                                WITH multiplier  0.05                             -->
<!--  ==============================================================================================================  -->
                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/description</xpath>
                        <value>
                            <description>A climbable reinforced sloped wall, created by layering materials over each other. Blocks line of sight but not movement. The flat leveled top is easy to stand on. Reinforced walls are neary entirely blast resistant and barely take damage from breaching methods.</description>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/statBases/MaxHitPoints</xpath>
                        <value>
                            <MaxHitPoints>1400</MaxHitPoints>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/statBases/Flammability</xpath>
                        <value>
                            <Flammability>0</Flammability>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/damageMultipliers/li[1]/multiplier</xpath>
                        <value>
                            <multiplier>0.05</multiplier>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/damageMultipliers/li[2]/multiplier</xpath>
                        <value>
                            <multiplier>0.05</multiplier>
                        </value>
                    </li>

<!--  ==============================================================================================================  -->
<!--    + NO_MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedWall                                                 -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Wall REPLACE researchPrerequisites                                                       -->
<!--                                 WITH researchPrerequisites li  Fabrication                                       -->
<!--                                                            li  Machining                                         -->
<!--  ==============================================================================================================  -->
                    <li Class="PatchOperationFindMod">
                        <mods>
                            <li>Doors Expanded</li>
                        </mods>

                        <nomatch Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/researchPrerequisites</xpath>
                            <value>
                                <researchPrerequisites>
                                    <li>Fabrication</li>
                                    <li>Machining</li>
                                </researchPrerequisites>
                            </value>
                        </nomatch>

<!--  ==============================================================================================================  -->
<!--    + MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedWall                                                    -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Wall REPLACE researchPrerequisites                                                       -->
<!--                                 WITH researchPrerequisites li  ProjectHeron_BlastDoors                           -->
<!--                                                            li  Fabrication                                       -->
<!--  ==============================================================================================================  -->
                        <match Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/researchPrerequisites</xpath>
                            <value>
                                <researchPrerequisites>
                                    <li>ProjectHeron_BlastDoors</li>
                                    <li>Fabrication</li>
                                </researchPrerequisites>
                            </value>
                        </match>

                    </li>

<!--  ==============================================================================================================  -->
<!--    + MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedWall                                          -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Wall AFTER statBases                                                                     -->
<!--                             INSERT costList POS_BlocksPlascrete  10                                              -->
<!--      + SlopedReinforced_Wall REPLACE costStuffCount                                                              -->
<!--                                 WITH costStuffCount  5                                                           -->
<!--  ==============================================================================================================  -->
                    <li Class="PatchOperationFindMod">
                        <mods>
                            <li>Positively: Metal and Stone</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <operations>

                                <li Class="PatchOperationInsert">
                                    <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/statBases</xpath>
                                    <value>
                                        <costList>
                                            <POS_BlocksPlascrete>10</POS_BlocksPlascrete>
                                        </costList>
                                    </value>
                                </li>

                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/costStuffCount</xpath>
                                    <value>
                                        <costStuffCount>5</costStuffCount>
                                    </value>
                                </li>

                            </operations>
                        </match>

<!--  ==============================================================================================================  -->
<!--    + NO_MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedWall                                       -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Wall REPLACE costStuffCount                                                              -->
<!--                                 WITH costStuffCount  15                                                          -->
<!--  ==============================================================================================================  -->
                        <nomatch Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef[defName="SlopedReinforced_Wall"]/costStuffCount</xpath>
                            <value>
                                <costStuffCount>15</costStuffCount>
                            </value>
                        </nomatch>

                    </li>

<!--  ==============================================================================================================  -->
<!--    + ALL_CASES  (ThingDef)  -  ReinforcedSlopedRidge                                                             -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Ridge REPLACE description                                                                -->
<!--            WITH description  A climbable reinforced sloped barrier, created by layering materials over each      -->
<!--                                other. Blocks line of sight but not movement, only impedes it. The narrow tops    -->
<!--                                require some balance to walk across. Reinforced walls are neary entirely blast    -->
<!--                                resistant and barely take damage from breaching methods.                          -->
<!--                                                                                                                  -->
<!--     + SlopedReinforced_Ridge statBases REPLACE MaxHitPoints                                                      -->
<!--                                           WITH MaxHitPoints  1400                                                -->
<!--     + SlopedReinforced_Ridge statBases REPLACE Flammability                                                      -->
<!--                                           WITH Flammability  0                                                   -->
<!--     + SlopedReinforced_Ridge damageMultipliers li[1] (Bomb) REPLACE multiplier                                   -->
<!--                                                                WITH multiplier  0.05                             -->
<!--     + SlopedReinforced_Ridge damageMultipliers li[2] (Thump) REPLACE multiplier                                  -->
<!--                                                                 WITH multiplier  0.05                            -->
<!--  ==============================================================================================================  -->
                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/description</xpath>
                        <value>
                            <description>A climbable reinforced sloped barrier, created by layering materials over each other. Blocks line of sight but not movement, only impedes it. The narrow tops require some balance to walk across. Reinforced walls are neary entirely blast resistant and barely take damage from breaching methods.</description>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/statBases/MaxHitPoints</xpath>
                        <value>
                            <MaxHitPoints>1400</MaxHitPoints>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/statBases/Flammability</xpath>
                        <value>
                            <Flammability>0</Flammability>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/damageMultipliers/li[1]/multiplier</xpath>
                        <value>
                            <multiplier>0.05</multiplier>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/damageMultipliers/li[2]/multiplier</xpath>
                        <value>
                            <multiplier>0.05</multiplier>
                        </value>
                    </li>

<!--  ==============================================================================================================  -->
<!--    + NO_MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedRidge                                                -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Ridge REPLACE researchPrerequisites                                                      -->
<!--                                  WITH researchPrerequisites li  Fabrication                                      -->
<!--                                                             li  Machining                                        -->
<!--  ==============================================================================================================  -->
                    <li Class="PatchOperationFindMod">
                        <mods>
                            <li>Doors Expanded</li>
                        </mods>

                        <nomatch Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/researchPrerequisites</xpath>
                            <value>
                                <researchPrerequisites>
                                    <li>Fabrication</li>
                                    <li>Machining</li>
                                </researchPrerequisites>
                            </value>
                        </nomatch>

<!--  ==============================================================================================================  -->
<!--    + MATCH DoorsExpanded  (ThingDef)  -  ReinforcedSlopedRidge                                                   -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Ridge REPLACE researchPrerequisites                                                      -->
<!--                                  WITH researchPrerequisites li  ProjectHeron_BlastDoors                          -->
<!--                                                             li  Fabrication                                      -->
<!--  ==============================================================================================================  -->
                        <match Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/researchPrerequisites</xpath>
                            <value>
                                <researchPrerequisites>
                                    <li>ProjectHeron_BlastDoors</li>
                                    <li>Fabrication</li>
                                </researchPrerequisites>
                            </value>
                        </match>

                    </li>

<!--  ==============================================================================================================  -->
<!--    + MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedRidge                                         -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Ridge AFTER statBases                                                                    -->
<!--                              INSERT costList POS_BlocksPlascrete  10                                             -->
<!--      + SlopedReinforced_Ridge REPLACE costStuffCount                                                             -->
<!--                                  WITH costStuffCount  5                                                          -->
<!--  ==============================================================================================================  -->
                    <li Class="PatchOperationFindMod">
                        <mods>
                            <li>Positively: Metal and Stone</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <operations>

                                <li Class="PatchOperationInsert">
                                    <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/statBases</xpath>
                                    <value>
                                        <costList>
                                            <POS_BlocksPlascrete>10</POS_BlocksPlascrete>
                                        </costList>
                                    </value>
                                </li>

                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/costStuffCount</xpath>
                                    <value>
                                        <costStuffCount>5</costStuffCount>
                                    </value>
                                </li>

                            </operations>
                        </match>

<!--  ==============================================================================================================  -->
<!--    + NO_MATCH PositivelyMetalAndStone  (ThingDef)  -  ReinforcedSlopedRidge                                      -->
<!--  ==============================================================================================================  -->
<!--      + SlopedReinforced_Ridge REPLACE costStuffCount                                                             -->
<!--                                  WITH costStuffCount  15                                                         -->
<!--  ==============================================================================================================  -->
                        <nomatch Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef[defName="SlopedReinforced_Ridge"]/costStuffCount</xpath>
                            <value>
                                <costStuffCount>15</costStuffCount>
                            </value>
                        </nomatch>

                    </li>

            </operations>
            </match>
        </match>
    </Operation>

</Patch>
